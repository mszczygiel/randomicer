{"version":3,"sources":["redux/Redux.ts","components/MiceTable.tsx","domain/Mouse.ts","domain/Parser.ts","components/MiceInput.tsx","domain/Randomizer.ts","components/Randomization.tsx","components/RandomizationResult.tsx","components/Help.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["miceLoaded","createAction","randomizationStarted","setDistribution","reducer","createReducer","mice","isRunningRandomization","handleType","state","action","payload","distribution","MiceTable","connect","props","Table","hover","size","map","m","key","id","tumors","length","tumorsVolume","Tumor","width","height","this","shorter","Math","min","max","Mouse","Array","from","t","volume","reduce","a","v","parseCSV","content","parseResult","parse","delimiter","skipEmptyLines","rxjs","data","pipe","bufferCount","w","l1","l2","trim","skip","v1","v2","replace","filter","Number","parseFloat","toArray","subscribe","x","readMouse","dispatchProps","onLoaded","MiceInput","undefined","onLoad","ev","target","result","className","type","accept","onChange","event","file","files","item","reader","FileReader","onloadend","readAsText","Group","median","volumes","mean","std","Distribution","groups","res","meanNorm","sum","g","tumorsMean","medianNorm","tumorsMedian","stdNorm","tumorsStdDev","mergeMap","g1","acc","g2","abs","distance","RandomizationError","message","randomize","settings","numberOfIterations","qualifiedMice","mouse","minTumorsVolume","maxTumorsVolume","expectedMiceCount","micePerGroup","numberOfGroups","gen","initialState","iterate","p","arr","currentIndex","randomIndex","floor","random","temporaryValue","shuffle","resultSelector","scheduler","take","buffered","createDistribution","rxMin","d1","d2","penalty","toPromise","setRandomizationResult","Randomization","randomizationRunning","useState","noOfGroups","setNoOfGroups","setMicePerGroup","minTumorVolume","setMinTumorVolume","maxTumorVolume","setMaxTumorVolume","errorMessage","setErrorMessage","randomizationPossible","Row","Col","htmlFor","placeholder","value","e","valueAsNumber","step","Alert","variant","Button","disabled","onClick","Promise","then","dist","runRandomization","role","DownloadDistributionComponent","symbols","blob","File","idx","group","header","sort","m1","m2","forEach","renderGroup","href","URL","createObjectURL","download","GroupComponent","toFixed","RandomizationResult","Help","open","setOpen","aria-expanded","viewBox","fill","xmlns","fill-rule","d","Collapse","in","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","App","Container","sm","offset","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.9fb802ea.chunk.js","sourcesContent":["import { createReducer, createAction } from \"typesafe-actions\"\nimport { Mouse } from \"../domain/Mouse\";\nimport { Distribution } from \"../domain/Randomizer\";\n\nexport interface State {\n    mice: Mouse[];\n    distribution?: Distribution;\n    isRunningRandomization: boolean;\n}\n\nconst MICE_LOADED = \"@randomicer/MICE_LOADED\";\nconst RANDOMIZATION_STARTED = \"@randomicer/RANDOMIZATION_STARTED\";\nconst SET_DISTRIBUTION = \"@randomicer/SET_DISTRIBUTION\";\n\nexport interface MiceLoaded {\n    mice: Mouse[];\n}\n\nexport const miceLoaded = createAction(MICE_LOADED)<MiceLoaded>();\nexport const randomizationStarted = createAction(RANDOMIZATION_STARTED)<void>();\nexport const setDistribution = createAction(SET_DISTRIBUTION)<Distribution>();\n\n\nconst initialState: State = {\n    mice: [],\n    isRunningRandomization: false\n};\n\nexport type Action = ReturnType<typeof miceLoaded>\n    | ReturnType<typeof setDistribution>\n    | ReturnType<typeof randomizationStarted>\n\nexport const reducer = createReducer<State, Action>(initialState)\n    .handleType(MICE_LOADED, (state, action) => {\n        return { ...state, mice: action.payload.mice };\n    }).handleType(RANDOMIZATION_STARTED, (state, action) => {\n        return { ...state, isRunningRandomization: true }\n    })\n    .handleType(SET_DISTRIBUTION, (state, action) => {\n        return { ...state, distribution: action.payload, isRunningRandomization: false }\n    });\n","import { connect } from \"react-redux\";\nimport { State } from \"../redux/Redux\";\nimport React from \"react\";\nimport Table from \"react-bootstrap/Table\";\n\ntype Props = ReturnType<typeof mapStateToProps>\n\nconst MiceTableComponent: React.FC<Props> = props => {\n    return (<Table hover size=\"sm\" >\n        <thead>\n            <tr>\n                <th>mouse id</th>\n                <th>tumors</th>\n                <th>volume</th>\n            </tr>\n        </thead>\n        <tbody>\n            {props.mice.map(m => (<tr key={m.id}>\n                <td>{m.id}</td>\n                <td>{m.tumors.length}</td>\n                <td>{m.tumorsVolume()}</td>\n            </tr>))}\n        </tbody>\n    </Table>);\n};\n\nconst mapStateToProps = (state: State) => (\n    { mice: state.mice }\n);\n\nexport const MiceTable = connect(mapStateToProps)(MiceTableComponent)\n","\nexport class Tumor {\n    readonly width: number;\n    readonly height: number;\n\n    constructor(width: number, height: number) {\n        this.width = width;\n        this.height = height;\n    }\n\n    public volume(): number {\n        const shorter = Math.min(this.width, this.height);\n        const longer = Math.max(this.width, this.height);\n        return 0.5 * shorter * shorter * longer\n    }\n}\n\nexport class Mouse {\n    readonly id: string;\n    readonly tumors: Array<Tumor>;\n\n    constructor(id: string, tumors: Array<Tumor>) {\n        this.id = id;\n        this.tumors = Array.from(tumors);\n    }\n\n    public tumorsVolume(): number {\n        return this.tumors.map(t => t.volume()).reduce((a, v) => v + a, 0);\n    }\n}\n\n","import { Mouse, Tumor } from \"./Mouse\";\nimport { parse } from \"papaparse\";\nimport * as rxjs from \"rxjs\";\nimport { bufferCount, map, skip, filter, toArray } from \"rxjs/operators\";\n\nexport function parseCSV(content: string): Mouse[] {\n    const config = { delimiter: \";\", skipEmptyLines: true };\n    const parseResult = parse(content, config);\n    let mice: Mouse[] = [];\n    rxjs.from(parseResult.data)\n        .pipe(\n            bufferCount(2),\n            map(w => readMouse(w[0], w[1])),\n            toArray())\n        .subscribe(m => mice = m);\n    return mice;\n}\n\nfunction readMouse(l1: string[], l2: string[]): Mouse {\n    const id = l1[0].trim();\n    let tumors: Tumor[] = [];\n    rxjs.zip(rxjs.from(l1), rxjs.from(l2))\n        .pipe(skip(1),\n            map(([v1, v2]) => [v1.trim().replace(\",\", \".\"), v2.trim().replace(\",\", \".\")]),\n            filter(([v1, v2]) => v1.length > 0 && v2.length > 0),\n            map(([v1, v2]) => new Tumor(Number.parseFloat(v1), Number.parseFloat(v2))),\n            toArray()).subscribe(x => tumors = x);\n\n    return new Mouse(id, tumors);\n}\n","import { connect } from \"react-redux\";\nimport React, { ChangeEvent } from \"react\";\nimport { miceLoaded } from \"../redux/Redux\";\nimport { parseCSV } from \"../domain/Parser\";\n\ntype Props = typeof dispatchProps;\n\nconst MiceInputComponent: React.FC<Props> = props => {\n    function onLoad(ev: ProgressEvent<FileReader>): any {\n        if (typeof ev.target?.result === 'string') {\n            const mice = parseCSV(ev.target.result);\n            props.onLoaded({ mice: mice });\n        }\n    }\n    function handleUpload(event: ChangeEvent<HTMLInputElement>): void {\n        const file = event.target.files?.item(0);\n        if (file) {\n            const reader = new FileReader();\n            reader.onloadend = onLoad;\n            reader.readAsText(file);\n        }\n    }\n    return (\n        <div className=\"input-group\">\n            <input type=\"file\" accept=\".txt,.csv,text/plain,text/csv\" onChange={handleUpload}></input>\n        </div>\n    );\n};\n\nconst dispatchProps = {\n    onLoaded: miceLoaded\n};\n\nexport const MiceInput = connect(undefined, dispatchProps)(MiceInputComponent);\n","import { Mouse } from \"./Mouse\";\nimport { abs, mean, median, std, min, max, sum } from \"mathjs\";\nimport * as rxjs from 'rxjs';\nimport { map, mergeMap, reduce, min as rxMin, take, bufferCount, toArray } from \"rxjs/operators\";\nimport { GenerateOptions } from \"rxjs/internal/observable/generate\";\nexport interface RandomizationSettings {\n    minTumorsVolume?: number;\n    maxTumorsVolume?: number;\n    micePerGroup: number;\n    numberOfGroups: number;\n};\n\nexport class Group {\n    readonly mice: Mouse[];\n    constructor(mice: Mouse[]) {\n        this.mice = mice;\n    }\n\n    public tumorsMedian(): number {\n        return median(this.volumes());\n    }\n\n    public tumorsMean(): number {\n        return mean(this.volumes());\n    }\n\n    public tumorsStdDev(): number {\n        return std(this.volumes());\n    }\n\n    private volumes(): number[] {\n        return this.mice.map(m => m.tumorsVolume());\n    }\n};\n\nexport class Distribution {\n    readonly groups: Group[];\n\n    constructor(groups: Group[]) {\n        this.groups = groups;\n    }\n\n    public penalty(): number {\n        let res = 0;\n        const meanNorm = sum(this.groups.map((g) => g.tumorsMean()));\n        const medianNorm = sum(this.groups.map((g) => g.tumorsMedian()));\n        const stdNorm = max(1, sum(this.groups.map((g) => g.tumorsStdDev())));\n\n        function distance(g1: Group, g2: Group) {\n            const mean = abs(g1.tumorsMean() - g2.tumorsMean()) / meanNorm;\n            const med = abs(g1.tumorsMedian() - g2.tumorsMedian()) / medianNorm;\n            const std = abs(g1.tumorsStdDev() - g2.tumorsStdDev()) / stdNorm;\n            return med * 2 + mean + std;\n        }\n\n        rxjs.from(this.groups).pipe(\n            mergeMap(g => rxjs.from(this.groups)\n                .pipe(map(g1 => [g, g1]))))\n            .pipe(\n                reduce((acc, [g1, g2]) => acc + distance(g1, g2), 0))\n            .subscribe(v => { res = v });\n        return res;\n    }\n};\n\nexport class RandomizationError {\n    readonly message: string;\n\n    constructor(message: string) {\n        this.message = message;\n    }\n};\n\nexport function randomize(mice: Mouse[], settings: RandomizationSettings): Promise<Distribution> | RandomizationError {\n    const numberOfIterations = max(1000, min(mice.length * mice.length, 10000));\n    const qualifiedMice = mice.filter(mouse => settings.minTumorsVolume == null ? true : mouse.tumorsVolume() >= settings.minTumorsVolume)\n        .filter(mouse => settings.maxTumorsVolume == null ? true : mouse.tumorsVolume() <= settings.maxTumorsVolume);\n    const expectedMiceCount = settings.micePerGroup * settings.numberOfGroups;\n    if (expectedMiceCount > qualifiedMice.length) {\n        return new RandomizationError(`Number of mice meeting criteria (${qualifiedMice.length}) is less than number of groups x number of mice per group (${expectedMiceCount})`);\n    }\n    const gen: GenerateOptions<Mouse[], Mouse[]> = {\n        initialState: [...qualifiedMice],\n        iterate: p => shuffle(p),\n        resultSelector: m => m,\n        scheduler: rxjs.asyncScheduler\n    };\n\n    function createDistribution(mice: Mouse[]) {\n        const distribution = rxjs.from(mice)\n            .pipe(\n                take(expectedMiceCount),\n                bufferCount(settings.micePerGroup),\n                toArray(),\n                map(buffered => buffered.map(g => new Group(g))),\n                map(groups => new Distribution(groups)))\n        return distribution;\n    }\n\n    return rxjs.generate(gen).pipe(\n        take(numberOfIterations),\n        mergeMap(mice => createDistribution(mice)),\n        rxMin((d1, d2) => d1.penalty() - d2.penalty())\n    ).toPromise();\n}\n\nfunction shuffle<T>(arr: T[]): T[] {\n    let currentIndex = arr.length;\n    const res = [...arr];\n    while (0 !== currentIndex) {\n\n        const randomIndex = Math.floor(Math.random() * currentIndex);\n        currentIndex -= 1;\n\n        const temporaryValue = res[currentIndex];\n        res[currentIndex] = res[randomIndex];\n        res[randomIndex] = temporaryValue;\n    }\n\n    return res;\n}\n","import { connect } from \"react-redux\";\nimport React, { useState } from \"react\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"react-bootstrap/Button\";\nimport Alert from \"react-bootstrap/Alert\";\nimport { MiceInput } from \"./MiceInput\";\nimport { State, setDistribution, randomizationStarted } from \"../redux/Redux\";\nimport { randomize, RandomizationError } from \"../domain/Randomizer\";\n\ntype Props = ReturnType<typeof mapStateToProps> & typeof dispatchProps;\n\nconst RandomizationComponent: React.FC<Props> = props => {\n    const [noOfGroups, setNoOfGroups] = useState(2);\n    const [micePerGroup, setMicePerGroup] = useState(2);\n    const [minTumorVolume, setMinTumorVolume] = useState<number | undefined>(undefined);\n    const [maxTumorVolume, setMaxTumorVolume] = useState<number | undefined>(undefined);\n    const [errorMessage, setErrorMessage] = useState<string>(\"\");\n    const randomizationPossible = props.mice.length > 1 && !props.randomizationRunning;\n\n    function showError() {\n        if (errorMessage.trim().length > 0) {\n            return <Alert variant=\"danger\">{errorMessage}</Alert>\n        } else {\n            return null;\n        }\n    }\n\n    function runRandomization() {\n        const res = randomize(props.mice, {\n            micePerGroup: micePerGroup,\n            numberOfGroups: noOfGroups,\n            minTumorsVolume: minTumorVolume,\n            maxTumorsVolume: maxTumorVolume\n        });\n\n        if (res instanceof RandomizationError) {\n            setErrorMessage(res.message);\n        } else if (res instanceof Promise) {\n            props.randomizationStarted();\n            res.then(dist => props.setRandomizationResult(dist));\n        }\n    }\n\n    function progressIndicator() {\n        if (props.randomizationRunning) {\n            return (<span className=\"spinner-border spinner-border-sm\" role=\"status\"></span>)\n        } else {\n            return null;\n        }\n    }\n\n    return (\n        <>\n            <Row>\n                <Col className=\"text-center\">\n                    <MiceInput />\n                </Col>\n            </Row>\n            <Row>\n                <Col>\n                    <label htmlFor=\"no-of-groups\">No of groups</label>\n                    <div className=\"input-group\">\n                        <input id=\"no-of-groups\"\n                            className=\"form-control\"\n                            type='number'\n                            placeholder=\"No of groups\"\n                            min=\"2\"\n                            value={noOfGroups}\n                            onChange={e => setNoOfGroups(e.target.valueAsNumber)}\n                        >\n                        </input>\n                    </div>\n                </Col>\n                <Col>\n                    <label htmlFor=\"mice-per-group\">Mice per group</label>\n                    <div className=\"input-group\">\n                        <input id=\"mice-per-group\"\n                            className=\"form-control\"\n                            type='number'\n                            placeholder=\"Mice per group\"\n                            min=\"2\"\n                            value={micePerGroup}\n                            onChange={e => setMicePerGroup(e.target.valueAsNumber)}\n                        >\n                        </input>\n                    </div>\n                </Col>\n                <Col>\n                    <label htmlFor=\"lower-tumor-threshold\">Min TV</label>\n                    <div className=\"input-group\">\n                        <input id=\"lower-tumor-threshold\"\n                            className=\"form-control\"\n                            type='number'\n                            step=\"0.01\"\n                            placeholder=\"Lower TV threshold\" min=\"0\"\n                            value={minTumorVolume || ''}\n                            onChange={e => {\n                                if (e.target.value === '') {\n                                    setMinTumorVolume(undefined);\n                                } else {\n                                    setMinTumorVolume(e.target.valueAsNumber);\n                                }\n                            }}\n                        >\n\n                        </input>\n                    </div>\n                </Col>\n                <Col>\n                    <label htmlFor=\"upper-tumor-threshold\">Max TV</label>\n                    <div className=\"input-group\">\n                        <input id=\"upper-tumor-threshold\"\n                            className=\"form-control\"\n                            type='number'\n                            step=\"0.01\"\n                            placeholder=\"Upper TV threshold\"\n                            min=\"0\"\n                            value={maxTumorVolume || ''}\n                            onChange={e => {\n                                if (e.target.value === '') {\n                                    setMaxTumorVolume(undefined);\n                                } else {\n                                    setMaxTumorVolume(e.target.valueAsNumber);\n                                }\n                            }}></input>\n                    </div>\n                </Col>\n            </Row>\n            <Row>\n                <Col>\n                    {showError()}\n                </Col>\n            </Row>\n            <Row className=\"mt-3\">\n                <Col className=\"text-center\">\n                    <Button\n                        disabled={!randomizationPossible}\n                        className=\"btn btn-primary\"\n                        onClick={() => runRandomization()}\n                    >\n                        {progressIndicator()}\n                        Randomize\n                    </Button>\n                </Col>\n            </Row>\n        </>);\n};\n\nconst mapStateToProps = (state: State) => ({\n    mice: state.mice,\n    randomizationRunning: state.isRunningRandomization\n});\n\nconst dispatchProps = {\n    setRandomizationResult: setDistribution,\n    randomizationStarted: randomizationStarted\n};\n\nexport const Randomization = connect(mapStateToProps, dispatchProps)(RandomizationComponent);\n","import { connect } from \"react-redux\";\nimport { State } from \"../redux/Redux\";\nimport { Group, Distribution } from \"../domain/Randomizer\";\nimport React from \"react\";\nimport Table from \"react-bootstrap/Table\";\nimport Button from \"react-bootstrap/Button\";\n\ntype Props = ReturnType<typeof mapDispatchToProps>;\n\nconst RandomizationResultComponent: React.FC<Props> = props => {\n    if (props.distribution === undefined) {\n        return null;\n    }\n\n    return (<>\n        <DownloadDistributionComponent distribution={props.distribution}></DownloadDistributionComponent>\n        {props.distribution.groups.map((g, idx) => <GroupComponent key={`group-${idx}`} group={g} id={idx}></GroupComponent>)}\n    </>);\n};\n\ninterface GroupComponentProps {\n    group: Group,\n    id: number\n};\n\ninterface DownloadDistributionComponentProps {\n    distribution: Distribution\n};\n\nconst DownloadDistributionComponent: React.FC<DownloadDistributionComponentProps> = props => {\n    const symbols = [\"_ _\", \"_ o\", \"o _\", \"o o\", \"_ oo\", \"oo _\", \"oo oo\", \"o oo\", \"oo o\"];\n    function renderGroup(group: Group, idx: number): string {\n        const header = `Sym;LP;TV;NT;G${idx};AVG;${group.tumorsMean()};MED;${group.tumorsMedian()};SD;${group.tumorsStdDev()}`;\n        let content = \"\";\n        group.mice.sort((m1, m2) => m2.tumorsVolume() - m1.tumorsVolume()).forEach((mouse, idx) => {\n            const symbol = symbols[idx % symbols.length];\n            content += `${symbol};${mouse.id};${mouse.tumorsVolume()};${mouse.tumors.length}\\n`\n        });\n        return `${header}\\n${content}`;\n    }\n    const blob = new File(props.distribution.groups.map((g, idx) => renderGroup(g, idx + 1)), \"result.csv\");\n    const href = URL.createObjectURL(blob);\n    return (<a href={href} download><Button variant=\"success\">Download</Button></a>);\n}\n\n\nconst GroupComponent: React.FC<GroupComponentProps> = props => {\n    const mice = props.group.mice.sort((m1, m2) => m2.tumorsVolume() - m1.tumorsVolume());\n    return (\n        <>\n            <h4>G{props.id + 1} AVG({props.group.tumorsMean().toFixed(3)}) MED({props.group.tumorsMedian().toFixed(3)}) SD({props.group.tumorsStdDev().toFixed(3)})</h4>\n            <Table size=\"sm\">\n                <thead>\n                    <tr>\n                        <th>id</th>\n                        <th>TV</th>\n                        <th>NT</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {mice.map(mouse => (\n                        <tr key={`mouse-${mouse.id}`}>\n                            <td>{mouse.id}</td>\n                            <td>{mouse.tumorsVolume()}</td>\n                            <td>{mouse.tumors.length}</td>\n                        </tr>\n                    ))}\n                </tbody>\n            </Table>\n        </>);\n}\n\nconst mapDispatchToProps = (state: State) => ({\n    distribution: state.distribution\n});\n\nexport const RandomizationResult = connect(mapDispatchToProps)(RandomizationResultComponent);\n","import React, { useState } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Accordion from \"react-bootstrap/Accordion\";\nimport Collapse from \"react-bootstrap/Collapse\";\n\ninterface OwnProps {\n\n}\ntype Props = OwnProps;\n\nexport const Help: React.FC<Props> = props => {\n    const [open, setOpen] = useState(false);\n    return (\n        <>\n            <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                onClick={() => setOpen(!open)}\n                aria-expanded={open}\n            >\n                <svg className=\"bi bi-question-circle\" width=\"2em\" height=\"2em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path fill-rule=\"evenodd\" d=\"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\" />\n                    <path d=\"M5.25 6.033h1.32c0-.781.458-1.384 1.36-1.384.685 0 1.313.343 1.313 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.007.463h1.307v-.355c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.326 0-2.786.647-2.754 2.533zm1.562 5.516c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z\" />\n                </svg>\n            </Button>\n            <Collapse in={open}>\n                <div className=\"text-justify\">\n                    <h5>\n                        File format:\n                    </h5>\n                    <p>\n                        Each mouse entry spans 2 rows and N columns (where N = max number of tumors in any mouse). Columns are separated with <em>;</em>\n                    </p>\n                    <p>\n                        For example, to represent 5 mice, where mouse with id 2 has two tumors (3.5x4.1 and 1.2x2.1), whereas rest have 1 (all 3.5x4.1) one could prepare file with the following content:\n                    </p>\n                    <pre>\n                        1;3.5;<br />\n                        ;4.1;<br />\n                        2;3.5;1.2<br />\n                        ;4.1;2.1<br />\n                        3;3.5;<br />\n                        ;4.1;<br />\n                        4;4.1;<br />\n                        ;3.5;<br />\n                        5;3.5;<br />\n                        ;4.1;\n                    </pre>\n                    <h5>\n                        Issues\n                    </h5>\n                    <p>\n                        If you encounter any issue or have improvement idea, please use raise issue on <a href=\"https://github.com/mszczygiel/randomicer/issues\" target=\"__blank\">Github</a>\n                    </p>\n                </div>\n            </Collapse>\n        </>\n    );\n};\n","import React from 'react';\nimport './App.css';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport { reducer } from './redux/Redux';\nimport { MiceTable } from './components/MiceTable';\nimport { Randomization } from './components/Randomization';\nimport { RandomizationResult } from './components/RandomizationResult';\nimport { Help } from './components/Help';\n\nconst store = createStore(reducer, (window as any).__REDUX_DEVTOOLS_EXTENSION__ && (window as any).__REDUX_DEVTOOLS_EXTENSION__());\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <Container>\n        <Row className=\"align-items-center\">\n          <Col className=\"text-center\">\n            <h1 className=\"text-primary\">Randomicer</h1>\n          </Col>\n        </Row>\n        <Row>\n          <Col sm={{offset: 6}} className=\"text-right\">\n            <Help></Help>\n          </Col>\n        </Row>\n        <Randomization />\n        <hr />\n        <Row>\n          <Col>\n            <h3 className=\"text-center\">Input</h3>\n            <MiceTable />\n          </Col>\n          <Col className=\"text-center\">\n            <h3>Output</h3>\n            <RandomizationResult></RandomizationResult>\n          </Col>\n        </Row>\n\n      </Container>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}